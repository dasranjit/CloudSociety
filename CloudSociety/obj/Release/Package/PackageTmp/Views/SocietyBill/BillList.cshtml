@model IEnumerable<CloudSocietyEntities.SocietyBill>
@{
    ViewBag.Title = "Bill List";
    ViewBag.Header = "List of Bills";
    ViewBag.SocietyNameHeader = ViewBag.SocietyHead;
    Layout = "~/Views/Shared/SocietyLayout.cshtml";
    bool IsFullAccess = new CloudSociety.Controllers.AppInfoController().IsFullAccess();    
}
<span class="SocName">Bill Abbreviation : @ViewBag.BillAbbreviation</span> &nbsp&nbsp&nbsp
<span class="SocName">Bill Date : @String.Format("{0:dd-MMM-yyyy}", ViewBag.SocietyBillDate)</span>
<br />
<br />
<table>
    <tr>
        @*<td>
            @Html.ActionLink("Generate Bill", "GenerateBill", new { id = ViewBag.SocietySubscriptionID }, new { @class = "buttton" })
        </td>
        <td>
            @Html.ActionLink("Delete Old Bills", "Delete", new { societySubscriptionID = ViewBag.SocietySubscriptionID, billAbbreviation= societyBill.BillAbbreviation }, new { @class = "buttton" })
        </td>*@
        <td>
            @Html.ActionLink("Download PDF", "CreateBillsReceiptsPdf", new { societySubscriptionID = ViewBag.SocietySubscriptionID, billDate = ViewBag.SocietyBillDate, billAbbreviation = ViewBag.BillAbbreviation }, new { @class = "buttton" })
        </td>
        @if (IsFullAccess)
        {
            <td>
                @Html.ActionLink("Send Mails To All", "SendMailToAll", new { societySubscriptionID = ViewBag.SocietySubscriptionID, billDate = ViewBag.SocietyBillDate, billAbbreviation = ViewBag.BillAbbreviation }, new { @class = "buttton" })
            </td>
            if (ViewBag.IsToShowSMSLink)
            {
            <td>
                @Html.ActionLink("Send SMS To All", "SendSMSToAll", new { societySubscriptionID = ViewBag.SocietySubscriptionID, billDate = ViewBag.SocietyBillDate, billAbbreviation = ViewBag.BillAbbreviation }, new { @class = "buttton" })
            </td> 
            }
        }
    </tr>
</table>
<br />
<table border="0" cellpadding="2" cellspacing="0" class="table">
    @{
        int Count = 1;
    }
    @foreach (var item in Model)
    {
        if (Count == 1)
        {
        <tr>
            <th></th>
            <th>Building Unit
            </th>
            <th>Bill No
            </th>
            <th>Amount
            </th>
            @if (item.Arrears != null)
            {               
                <th>Arrears
                </th>
            }
            @if (item.Arrears != null)
            {               
                <th>Interest Arrears
                </th>
            }
            @if (item.Interest != null)
            {               
                <th>Interest
                </th> 
            }
            @if (item.Tax != null)
            {  
                <th>
                    @Html.DisplayFor(modelItem => item.Tax)
                </th>            
            }
            <th>Payable
            </th>
            @*<th>
                Particulars
            </th>*@
        </tr>
        }  
        <tr @if ((Count % 2) == 0)
            { <text> class="TableRow" </text> }
            else
            { <text> class="altTableRow" </text>} >
            <td>
                @Html.ActionLink("Details", "Details", new { id = item.SocietyBillID, societySubscriptionID = ViewBag.SocietySubscriptionID, sms = ViewBag.IsToShowSMSLink }, new { @class = "EditDelete" })
                @if (ViewBag.IsToShowSMSLink)
                {
                    <text> | </text> @Html.ActionLink("Send SMS", "SendSMS", new { id = item.SocietyBillID }, new { @class = "EditDelete" })                             
                }
            </td>
            <td>
                @item.SocietyBuildingUnit.SocietyBuilding.Building - @Html.DisplayFor(modelItem => item.SocietyBuildingUnit.Unit)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BillNo)
            </td>
            <td align="right">
                @Html.DisplayFor(modelItem => item.uAmount)
            </td>
            @if (item.Arrears != null)
            {                
                <td align="right">
                    @Html.DisplayFor(modelItem => item.Arrears)
                </td>
            }
            @if (item.InterestArrears != null)
            {       
                <td align="right">
                    @Html.DisplayFor(modelItem => item.InterestArrears)
                </td>
            }
            @if (item.Interest != null)
            { 
                <td align="right">
                    @Html.DisplayFor(modelItem => item.Interest)
                </td>
            }
            @if (item.Tax != null)
            {         
                <td align="right">
                    @Html.DisplayFor(modelItem => item.TaxAmount)
                </td>             
            }
            <td align="right">
                @Html.DisplayFor(modelItem => item.Payable)
            </td>
            @*<td>
                @Html.DisplayFor(modelItem => item.Particulars)
            </td>*@
        </tr>
            Count = Count + 1;
    }
    @if (Count == 1)
    {<tr class="TableRow">
        <td>Currently there are no Records
        </td>
    </tr> }
</table>
<br />
<div>
    @Html.ActionLink("Back", "Menu", "SocietySubscription", new { id = ViewBag.SocietySubscriptionID }, new { @class = "EditDelete" })
</div>
