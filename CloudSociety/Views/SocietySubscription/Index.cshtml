@model IEnumerable<CloudSocietyEntities.SocietySubscription>
@{
    ViewBag.Title = "Index";
    ViewBag.Header = "Index";
@*Layout = "~/Views/Shared/SubscriberLayout.cshtml";*@
}
@if (Model.FirstOrDefault().PaidTillDate == Model.FirstOrDefault().SubscriptionEnd)
{
    <div class="buttton" style="width: 35px;">
        @Html.ActionLink("Renew", "Renew", new { id = Model.LastOrDefault().SocietySubscriptionID })</div>
    <br />
}
<span class="SocName">@Model.FirstOrDefault().Society.Name</span><br />
<br />
<table border="0" cellpadding="2" cellspacing="0" class="table">
    @{
        int Count = 1;
    }
    @foreach (var item in Model)
    {
        if (Count == 1)
        {
        <tr>
            <th>
            </th>
            <th>
                Start
            </th>
            <th>
                End
            </th>
            <th>
                Paid Till
            </th>
            <th>
                No Of Members
            </th>
            <th>
                Invoiced Members
            </th>
            <th>
                Additional Members
            </th>
            <th>
                Paid Months
            </th>
            <th>
                Invoiced Months
            </th>
            <th>
                Subscribed Months
            </th>
            <th>
                Open @*Closed*@
            </th>
        </tr>
       
        }
 
        <tr @if ((Count % 2) == 0)
            { <text> class="TableRow" </text> }
            else
            { <text> class="altTableRow" </text>} >
            <td>
                @{
            var pendingservices = item.SocietySubscriptionServices.Where(s => s.ActiveStatus == "I");
                }
                @if (item.NoOfInvoicedMembers == 0 && item.InvoicedMonths == 0 && pendingservices.Count() == 0)
                {
                    @Html.ActionLink("Edit", "Edit", new { id = item.SocietySubscriptionID }, new { @class = "EditDelete" }) 
                    @*<text> | </text>
                    @Html.ActionLink("Delete", "Delete", new { id = item.SocietySubscriptionID }, new { @class = "EditDelete" })*@
                }
            </td>
            <td>
                @String.Format("{0:dd-MMM-yyyy}", item.SubscriptionStart)
            </td>
            <td>
                @String.Format("{0:dd-MMM-yyyy}", item.SubscriptionEnd)
            </td>
            <td>
                @String.Format("{0:dd-MMM-yyyy}", item.PaidTillDate)
            </td>
            <td>
                @item.NoOfMembers
            </td>
            <td>
                @item.NoOfInvoicedMembers
            </td>
            <td>
                @item.NoOfAdditionalMembers
            </td>
            <td>
                @item.PaidMonths
            </td>
            <td>
                @item.InvoicedMonths
            </td>
            <td>
                @item.SubscribedMonths
            </td>
            <td>
                @if (item.Closed == true)
                { <text>
                    <img src="@Url.Content("~/Content/Images/Copy of cancel-icon.png")" /></text> }
            </td>
        </tr>
                Count = Count + 1;

    }
    @if (Count == 1)
    {<tr class="TableRow">
        <td>
            Currently there are no Records
        </td>
    </tr> }
</table>
<br />
<br />
<div>
    @Html.ActionLink("Back to List", "Index", "Society", null, new { @class = "EditDelete" })
</div>
